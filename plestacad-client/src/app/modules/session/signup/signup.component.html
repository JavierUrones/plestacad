<div class="bg">
  <div class="center-div">
    <mat-card>
      <mat-card-content>
        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
          <h3>{{ "register.main" | translate }}</h3>
          <mat-grid-list cols="2" rowHeight="2:1">
            <mat-grid-tile>
              <mat-form-field class="full-width-input">
                <input
                  matInput
                  placeholder="Nombre"
                  formControlName="name"
                  required
                />
                <mat-error *ngIf="this.registerForm.get('name')?.errors?.['required']"> Indica un nombre váĺido </mat-error>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile>
              <mat-form-field class="full-width-input">
                <input
                  matInput
                  placeholder="Apellidos"
                  formControlName="surname"
                  required
                />
                <mat-error *ngIf="this.registerForm.get('surname')?.errors?.['required']"> Indica un apellido váĺido </mat-error>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile>
              <mat-form-field class="full-width-input">
                <input
                  matInput
                  type="password"
                  placeholder="Introduce tu contraseña"
                  formControlName="password"
                  required
                />
                <mat-error *ngIf="this.registerForm.get('password')?.errors?.['required']"> Contraseña requerida </mat-error>
                <mat-error *ngIf="this.registerForm.get('password')?.errors?.['minlength']"> Contraseña demasiado corta </mat-error>

                                <!--<mat-error ngIf="registerForm.get('password').errors.required"> Contraseña obligatoria </mat-error>
                #<mat-error ngIf="registerForm.get('password').errors.minLength"> La longitud mínima es 8 caracteres </mat-error>-->

              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile>
              <mat-form-field class="full-width-input">
                <input
                  matInput
                  type="password"
                  placeholder="Repite la contraseña"
                  formControlName="repeatPassword"
                  required
                />
              </mat-form-field>
            </mat-grid-tile>
          </mat-grid-list>

          <mat-grid-list cols="1" rowHeight="4:1">
            <mat-grid-tile>
              <mat-form-field class="full-width-input">
                <input
                  matInput
                  placeholder="Correo electrónico"
                  formControlName="email"
                  required
                />
                <mat-error> Indica una dirección de correo válida </mat-error>
              </mat-form-field></mat-grid-tile
            >
            <mat-grid-tile
              ><mat-form-field appearance="fill">
                <mat-label>Selecciona tu rol</mat-label>
                <mat-select [formControl]="roleControl" required>
                  <mat-option *ngFor="let role of roles" [value]="role.value">
                    {{ role.title }}
                  </mat-option>
                </mat-select>
                <mat-error *ngIf="roleControl.hasError('required')"
                  >Por favor selecciona tu rol</mat-error
                >
              </mat-form-field></mat-grid-tile
            >
          </mat-grid-list>
          <div class="mainError">
          <mat-error  *ngIf="this.registerForm.errors?.['invalidPassword'] && this.registerForm.get('repeatPassword')?.touched">
            Las contraseñas no coinciden
          </mat-error>
          <mat-error *ngIf="registerFormInvalid">{{errorMessage}}</mat-error>
        </div>
          <button mat-raised-button color="primary">
            Crear mi cuenta
          </button>
        </form>
      </mat-card-content>
      <mat-card>
        <p>¿Ya estás registrado?</p>
        <a routerLink="/login" routerLinkActive="active">Inicia sesión</a>
      </mat-card>
    </mat-card>
  </div>
</div>
